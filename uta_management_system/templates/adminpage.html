<!DOCTYPE html>
{% load rest_framework %}
<html lang = "en">
    <head>
        {% load static %}
        {% csrf_token %}
        <title>Admin</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="{% static "script.js" %}"></script>
    </head>
    {% if messages %}
        {% for message in messages %}
            <p {% if message.tags == "error" %} 
                    class="timeout alert alert-danger fade show rounded-0 position-absolute w-100" 
                {% else %}
                    class="timeout alert alert-{{message.tags}} fade show rounded-0 position-absolute w-100"
                {% endif %} >
                {{ message }}
            </p>
        {% endfor %}
    {% endif %}
    <div class="container text-center justify-content-center mt-5 mb-5 shadow-lg">
        <div class="row card rounded-0 bg-body" style="border-color:#4e2e91;">
            <div class="card-header rounded-0 text-warning fs-3 fw-bold" style="background-color:#4e2e91;">Admin Operations</div>
            <div class="card-body">
                This link should not be shared with any UTA. It should be private and only used by the admin responsible for the admin operations.
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 card rounded-0 bg-body p-0" id="checkin-endpoint-actions" style="border-color:#4e2e91;">
                <div class="card-header rounded-0 text-white fw-bold" style="background-color:#4e2e91;">Today's Link</div>
                <div class="card-body">
                    <a href="http://{{ request.get_host }}/{{ random_pass }}" target="_blank"> {{ random_pass }}</a>
                </div>
            </div>
            <div class="col card rounded-0 justify-content-center p-3 text-black border-top-0 border-start-0" style="border-color:#4e2e91;">
                <div>This link changes each day. Share this link only with the UTA or person setting up the login at the beginning of each day. This should not be shared with all UTAs as that will allow them to login from outside the building</div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 card rounded-0 bg-body p-0" id="schedule-actions" style="border-color:#4e2e91;">
                <div class="card-header rounded-0 text-white fw-bold" style="background-color:#4e2e91;">Update Schedule</div>
                <div class="card-body">
                    <form method="POST" class="input-group d-flex justify-content-center">
                        <input type='url' name='file_link'>
                        <button class="btn rounded-0 text-white fw-bold" type='submit' style="background-color: #4e2e91;">Update</button>
                    </form>
                </div>
            </div>
            <div class="col card rounded-0 justify-content-center p-3 text-black border-top-0 border-start-0" style="border-color:#4e2e91;">
                <p>Updating the link will get rid of old information from the database but keep the checkins for timesheet. This field expects a Google Sheets link. Make sure to click on "Share" and copy the link with "Copy link". The document must be accessible with the link to anyone. The column names must be formatted appropriately. <a class="in-line" target="_blank" href="https://docs.google.com/spreadsheets/d/1-fm1C8ltwPC8XTCMGzqvDvfjpryteVoE8tw0JZyzW6o/edit?usp=sharing">Here is a template file link that can be used.</a> Feel free to make a copy of this and modify.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 card rounded-0 bg-body p-0" id="timesheet-actions" style="border-color:#4e2e91;">
                <div class="card-header rounded-0 text-white fw-bold" style="background-color:#4e2e91;">Timesheets</div>
                <div class="card-body">
                    <form method="POST">
                        <div class="input-group mb-3">
                            <div class="border border-dark input-group-prepend"> <span class="input-group-text rounded-0 text-white fw-bold" style="background-color:#4e2e91;">Start</span></div>
                            <input class="border border-dark form-control rounded-0" type="date" name="start_date" required>
                        </div>
                        <div class="input-group mb-3">
                            <div class="border border-dark input-group-prepend"> <span class="input-group-text rounded-0 text-white fw-bold" style="background-color:#4e2e91;">Weeks</span></div>
                            <input class="border border-dark form-control rounded-0" type="number" value="1" min="0" max="5" name="weeks" required>
                        </div>
                        <button class="btn rounded-0 text-white fw-bold" type='submit' name="timesheet" value="True" style="background-color:#4e2e91;">Download</button>
                    </form>
                </div>
            </div>
            <div class="col card rounded-0 justify-content-center p-3 border-top-0 border-start-0" style="border-color:#4e2e91;">
                The Start field should receive the data from which you want to get the timesheets. Weeks field represents how many weeks from the start date. A week ends on each Friday.
            </div>
        </div>
    </div>
</html>
