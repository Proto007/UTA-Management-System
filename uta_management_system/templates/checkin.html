<!DOCTYPE html>
{% load rest_framework %}
<html>
    <head>
        <title>UTA-checkin</title>
        {% load static %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="{% static "script.js" %}"></script>
    </head>
    <div>
        {% if on_shift %}
            <form method="POST">
                {% csrf_token %}
                <label>Emplid: <input name='covered_by' value="{{covering}}" readonly></label><br>
                <label>Additional shifts: <input name="number_of_shifts" value="{{shift_num}}" readonly></label><br>
                <label>CUNY Alternate Schedule: <input name="alternate_day" value="{{alt_day}}" readonly></label><br>
                <body>Who are you covering?</body>
                {% for uta in on_shift %}
                    <input type="submit" name="fullname" value="{{uta}}"></label>
                {% endfor %}
            </form>
        {% else %}
            <form method="POST">
                {% csrf_token %}
                <input pattern="[0-9]{8}" required="required" placeholder="UTA Emplid (e.g.11111111)" name='emplid'><br>
                <input type="number" value="0" min="0" max="5" required placeholder="Additional shifts after current shift" name="number_of_shifts"><br>
                <label><input type="checkbox" class="alternate-toggle">CUNY Alternate Day</label>
                <select name="alternate_day" class="alternate-day-selector">
                    <option value="">Select Alternate Day</option>
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                </select><br>
                {% if messages %}
                    {% for message in messages %}
                        <p {% if message.tags == "error" %} 
                                class="timeout text-danger fade show" 
                            {% else %}
                                class="timeout text-success fade show"
                            {% endif %} >
                            {{ message }}
                        </p>
                    {% endfor %}
                {% endif %}
                {% if on_shift %}
                    <label> Who are you covering?
                        <select name="covering">
                            {% for message in messages %}
                                <option value="{{message}}">{{ message }}</option>
                            {% endfor %}
                        </select>
                    </label><br>
                {% endif %}
                <button type='submit'>Checkin</button>
            </form>
        {% endif %}
        
    </div>
</html>
